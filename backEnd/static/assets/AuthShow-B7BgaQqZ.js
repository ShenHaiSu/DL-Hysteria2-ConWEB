const __vite__fileDeps=["assets/IconUser-DQjZadyU.js","assets/index-D9VZ0Vok.js","assets/index-DBz_WDjk.css","assets/index-CRkKNeF3.js","assets/index-DRRR9NRq.js","assets/index-C_XdTu-8.js","assets/index-NcuwLOvv.js","assets/index-29EM_L6Y.js","assets/index-B1ewBQSY.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{h as q,H as B,G as Q,j as X,o as Y,J as A,a as S,k,b as m,d as I,e as F,t as N,w as x,F as H,A as b,f as L,c as j,x as ee,g as V,_ as E,K as te,M as re,N as ne,P as oe}from"./index-D9VZ0Vok.js";import se from"./index-BDaHi3Un.js";import{u as ae}from"./auth-RRUEcqO9.js";function ue(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var $={exports:{}},J={exports:{}};(function(){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U={rotl:function(u,d){return u<<d|u>>>32-d},rotr:function(u,d){return u<<32-d|u>>>d},endian:function(u){if(u.constructor==Number)return U.rotl(u,8)&16711935|U.rotl(u,24)&4278255360;for(var d=0;d<u.length;d++)u[d]=U.endian(u[d]);return u},randomBytes:function(u){for(var d=[];u>0;u--)d.push(Math.floor(Math.random()*256));return d},bytesToWords:function(u){for(var d=[],i=0,a=0;i<u.length;i++,a+=8)d[a>>>5]|=u[i]<<24-a%32;return d},wordsToBytes:function(u){for(var d=[],i=0;i<u.length*32;i+=8)d.push(u[i>>>5]>>>24-i%32&255);return d},bytesToHex:function(u){for(var d=[],i=0;i<u.length;i++)d.push((u[i]>>>4).toString(16)),d.push((u[i]&15).toString(16));return d.join("")},hexToBytes:function(u){for(var d=[],i=0;i<u.length;i+=2)d.push(parseInt(u.substr(i,2),16));return d},bytesToBase64:function(u){for(var d=[],i=0;i<u.length;i+=3)for(var a=u[i]<<16|u[i+1]<<8|u[i+2],c=0;c<4;c++)i*8+c*6<=u.length*8?d.push(l.charAt(a>>>6*(3-c)&63)):d.push("=");return d.join("")},base64ToBytes:function(u){u=u.replace(/[^A-Z0-9+\/]/ig,"");for(var d=[],i=0,a=0;i<u.length;a=++i%4)a!=0&&d.push((l.indexOf(u.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<a*2|l.indexOf(u.charAt(i))>>>6-a*2);return d}};J.exports=U})();var le=J.exports,R={utf8:{stringToBytes:function(l){return R.bin.stringToBytes(unescape(encodeURIComponent(l)))},bytesToString:function(l){return decodeURIComponent(escape(R.bin.bytesToString(l)))}},bin:{stringToBytes:function(l){for(var U=[],u=0;u<l.length;u++)U.push(l.charCodeAt(u)&255);return U},bytesToString:function(l){for(var U=[],u=0;u<l.length;u++)U.push(String.fromCharCode(l[u]));return U.join("")}}},W=R;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ie=function(l){return l!=null&&(Z(l)||de(l)||!!l._isBuffer)};function Z(l){return!!l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)}function de(l){return typeof l.readFloatLE=="function"&&typeof l.slice=="function"&&Z(l.slice(0,0))}(function(){var l=le,U=W.utf8,u=ie,d=W.bin,i=function(a,c){a.constructor==String?c&&c.encoding==="binary"?a=d.stringToBytes(a):a=U.stringToBytes(a):u(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var o=l.bytesToWords(a),p=a.length*8,n=1732584193,t=-271733879,e=-1732584194,r=271733878,s=0;s<o.length;s++)o[s]=(o[s]<<8|o[s]>>>24)&16711935|(o[s]<<24|o[s]>>>8)&4278255360;o[p>>>5]|=128<<p%32,o[(p+64>>>9<<4)+14]=p;for(var _=i._ff,y=i._gg,g=i._hh,h=i._ii,s=0;s<o.length;s+=16){var D=n,O=t,C=e,z=r;n=_(n,t,e,r,o[s+0],7,-680876936),r=_(r,n,t,e,o[s+1],12,-389564586),e=_(e,r,n,t,o[s+2],17,606105819),t=_(t,e,r,n,o[s+3],22,-1044525330),n=_(n,t,e,r,o[s+4],7,-176418897),r=_(r,n,t,e,o[s+5],12,1200080426),e=_(e,r,n,t,o[s+6],17,-1473231341),t=_(t,e,r,n,o[s+7],22,-45705983),n=_(n,t,e,r,o[s+8],7,1770035416),r=_(r,n,t,e,o[s+9],12,-1958414417),e=_(e,r,n,t,o[s+10],17,-42063),t=_(t,e,r,n,o[s+11],22,-1990404162),n=_(n,t,e,r,o[s+12],7,1804603682),r=_(r,n,t,e,o[s+13],12,-40341101),e=_(e,r,n,t,o[s+14],17,-1502002290),t=_(t,e,r,n,o[s+15],22,1236535329),n=y(n,t,e,r,o[s+1],5,-165796510),r=y(r,n,t,e,o[s+6],9,-1069501632),e=y(e,r,n,t,o[s+11],14,643717713),t=y(t,e,r,n,o[s+0],20,-373897302),n=y(n,t,e,r,o[s+5],5,-701558691),r=y(r,n,t,e,o[s+10],9,38016083),e=y(e,r,n,t,o[s+15],14,-660478335),t=y(t,e,r,n,o[s+4],20,-405537848),n=y(n,t,e,r,o[s+9],5,568446438),r=y(r,n,t,e,o[s+14],9,-1019803690),e=y(e,r,n,t,o[s+3],14,-187363961),t=y(t,e,r,n,o[s+8],20,1163531501),n=y(n,t,e,r,o[s+13],5,-1444681467),r=y(r,n,t,e,o[s+2],9,-51403784),e=y(e,r,n,t,o[s+7],14,1735328473),t=y(t,e,r,n,o[s+12],20,-1926607734),n=g(n,t,e,r,o[s+5],4,-378558),r=g(r,n,t,e,o[s+8],11,-2022574463),e=g(e,r,n,t,o[s+11],16,1839030562),t=g(t,e,r,n,o[s+14],23,-35309556),n=g(n,t,e,r,o[s+1],4,-1530992060),r=g(r,n,t,e,o[s+4],11,1272893353),e=g(e,r,n,t,o[s+7],16,-155497632),t=g(t,e,r,n,o[s+10],23,-1094730640),n=g(n,t,e,r,o[s+13],4,681279174),r=g(r,n,t,e,o[s+0],11,-358537222),e=g(e,r,n,t,o[s+3],16,-722521979),t=g(t,e,r,n,o[s+6],23,76029189),n=g(n,t,e,r,o[s+9],4,-640364487),r=g(r,n,t,e,o[s+12],11,-421815835),e=g(e,r,n,t,o[s+15],16,530742520),t=g(t,e,r,n,o[s+2],23,-995338651),n=h(n,t,e,r,o[s+0],6,-198630844),r=h(r,n,t,e,o[s+7],10,1126891415),e=h(e,r,n,t,o[s+14],15,-1416354905),t=h(t,e,r,n,o[s+5],21,-57434055),n=h(n,t,e,r,o[s+12],6,1700485571),r=h(r,n,t,e,o[s+3],10,-1894986606),e=h(e,r,n,t,o[s+10],15,-1051523),t=h(t,e,r,n,o[s+1],21,-2054922799),n=h(n,t,e,r,o[s+8],6,1873313359),r=h(r,n,t,e,o[s+15],10,-30611744),e=h(e,r,n,t,o[s+6],15,-1560198380),t=h(t,e,r,n,o[s+13],21,1309151649),n=h(n,t,e,r,o[s+4],6,-145523070),r=h(r,n,t,e,o[s+11],10,-1120210379),e=h(e,r,n,t,o[s+2],15,718787259),t=h(t,e,r,n,o[s+9],21,-343485551),n=n+D>>>0,t=t+O>>>0,e=e+C>>>0,r=r+z>>>0}return l.endian([n,t,e,r])};i._ff=function(a,c,o,p,n,t,e){var r=a+(c&o|~c&p)+(n>>>0)+e;return(r<<t|r>>>32-t)+c},i._gg=function(a,c,o,p,n,t,e){var r=a+(c&p|o&~p)+(n>>>0)+e;return(r<<t|r>>>32-t)+c},i._hh=function(a,c,o,p,n,t,e){var r=a+(c^o^p)+(n>>>0)+e;return(r<<t|r>>>32-t)+c},i._ii=function(a,c,o,p,n,t,e){var r=a+(o^(c|~p))+(n>>>0)+e;return(r<<t|r>>>32-t)+c},i._blocksize=16,i._digestsize=16,$.exports=function(a,c){if(a==null)throw new Error("Illegal argument "+a);var o=l.wordsToBytes(i(a,c));return c&&c.asBytes?o:c&&c.asString?d.bytesToString(o):l.bytesToHex(o)}})();var ce=$.exports;const G=ue(ce),w=l=>(ne("data-v-746ec453"),l=l(),oe(),l),fe=w(()=>m("div",null,[m("h2",null,"认证界面")],-1)),me={key:0,AuthCardDialogAuthed:""},ve={style:{width:"100%"}},he=w(()=>m("td",null,"用户名",-1)),pe=w(()=>m("td",null,"权限级别",-1)),_e={colspan:"2"},ye=w(()=>m("br",null,null,-1)),ge=w(()=>m("br",null,null,-1)),Ie={key:1,AuthCardDialogUnauthed:""},Ue=w(()=>m("label",null,"账户名",-1)),Fe=w(()=>m("label",null,"密码",-1)),Te=w(()=>m("label",null,"管理员秘钥",-1)),xe=w(()=>m("br",null,null,-1)),we={__name:"AuthShow",setup(l){const U=V(()=>E(()=>import("./IconUser-DQjZadyU.js"),__vite__mapDeps([0,1,2]))),u=V(()=>E(()=>import("./index-CRkKNeF3.js"),__vite__mapDeps([3,1,2]))),d=V(()=>E(()=>import("./index-DRRR9NRq.js"),__vite__mapDeps([4,1,2,5,6,7]))),i=V(()=>E(()=>import("./index-B1ewBQSY.js"),__vite__mapDeps([8,1,2]))),a=ae(),c=B(!1),o=B(""),p=B(!1),n=B(""),t=B(""),e=Q(),r=()=>o.value.length==0||t.value.length==0,s=()=>G(G(t.value+"DAOLUOLTS").toString()),_=()=>{c.value=!0,p.value=!1,o.value="",t.value="",n.value=""},y=X(()=>Object.keys(a.getUserInfo()));Y(()=>{A("/auth/checkLogin",{method:"post"}).then(v=>{const f=v.data;a.setUserName(f.userName),a.setUserPermission(f.userPermission),a.coverUserInfo(f.userInfo),a.setIsLogin(!0),e.add({severity:"success",summary:"身份验证",detail:"已通过身份验证，欢迎回来："+f.userName,life:3e3})}).catch(()=>{e.add({severity:"error",summary:"当前未登录",detail:"请先登录",life:3e3})})});const g=()=>{if(r())return e.add({severity:"error",summary:"错误",detail:"账号或密码不能为空",life:3e3});if(!p.value)return p.value=!0;A("/auth/regist",{method:"post",data:{userName:o.value,userPassword:s(),adminKey:n.value}}).then(v=>{const f=v.data;a.setUserName(f.userName),a.setUserPermission(f.userPermission),a.coverUserInfo(f.userInfo),a.setIsLogin(!0)}).catch(v=>{e.add({severity:"error",summary:"错误",detail:v.response.data.msg,life:3e3})})},h=()=>{if(r())return e.add({severity:"error",summary:"错误",detail:"账号或密码不能为空",life:3e3});A("/auth/login",{method:"post",data:{userName:o.value,userPassword:s()}}).then(v=>{const f=v.data;a.setUserName(f.userName),a.setUserPermission(f.userPermission),a.coverUserInfo(f.userInfo),a.setIsLogin(!0),e.add({severity:"success",summary:"成功",detail:f.msg,life:3e3}),c.value=!1}).catch(v=>{e.add({severity:"error",summary:"错误",detail:v.response.data.msg,life:3e3})})},D=()=>{if(!a.getIsLogin())return e.add({severity:"error",summary:"错误",detail:"当前已经是未登录状态，请刷新页面尝试修正显示。",life:3e3});A("/auth/logout",{method:"post"}).then(v=>{v.data,a.setIsLogin(!1),a.setUserName(""),a.setUserPermission("none"),a.coverUserInfo({}),e.add({severity:"success",summary:"成功",detail:"完成登出，现在是未登录状态。",life:3e3}),location.reload()}).catch(v=>{e.add({severity:"error",summary:"错误",detail:v.response.data.msg,life:3e3})})},O=()=>{if(!a.getIsLogin())return e.add({severity:"error",summary:"错误",detail:"当前已经是未登录状态，请刷新页面尝试修正显示。",life:3e3});A("/auth/checkLogin",{method:"post"}).then(v=>{const f=v.data;a.setUserName(f.userName),a.setUserPermission(f.userPermission),a.coverUserInfo(f.userInfo),a.setIsLogin(!0),e.add({severity:"success",summary:"成功",detail:"已收到服务器下发的新Session",life:3e3})}).catch(v=>{e.add({severity:"error",summary:"错误",detail:v.response.data.msg,life:3e3})})},C=v=>{if(v.key=="Enter")return h()},z=()=>{switch(a.getUserPermission()){case"none":return"";case"user":return"success";case"admin":return"danger"}};return(v,f)=>{const K=se,P=te,M=re;return S(),k(H,null,[m("div",{AuthCardContainer:"",onClick:_},[I(F(U)),m("span",null,N(F(a).getIsLogin()?F(a).getUserName():"未登录"),1)]),I(F(d),{visible:c.value,"onUpdate:visible":f[3]||(f[3]=T=>c.value=T),modal:"",header:"认证界面",style:{maxWidth:"50vw",minWidth:"350px"}},{header:x(()=>[fe]),default:x(()=>[F(a).isLogin?(S(),k("div",me,[m("div",null,[m("table",ve,[m("tbody",null,[m("tr",null,[he,m("td",null,N(F(a).getUserName()),1)]),m("tr",null,[pe,m("td",null,[I(F(i),{value:F(a).getUserPermission(),severity:z(),rounded:""},null,8,["value","severity"])])]),m("tr",null,[m("td",_e,[I(K,{style:{width:"100%"}})])]),(S(!0),k(H,null,b(y.value,T=>(S(),k("tr",null,[m("td",null,N(T),1),m("td",null,N(F(a).getUserInfo()[T]),1)]))),256))])]),ye,ge]),m("div",null,[I(P,{size:"small",onClick:O},{default:x(()=>[L("刷新")]),_:1}),I(K,{layout:"vertical"}),I(P,{size:"small",onClick:D},{default:x(()=>[L("登出")]),_:1})])])):(S(),k("div",Ie,[m("div",null,[I(F(u),null,{default:x(()=>[I(M,{size:"small",onKeydown:C,modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=T=>o.value=T),placeholder:"必填"},null,8,["modelValue"]),Ue]),_:1}),I(F(u),null,{default:x(()=>[I(M,{size:"small",type:"password",onKeydown:C,modelValue:t.value,"onUpdate:modelValue":f[1]||(f[1]=T=>t.value=T),placeholder:"必填"},null,8,["modelValue"]),Fe]),_:1}),p.value?(S(),j(F(u),{key:0},{default:x(()=>[I(M,{size:"small",modelValue:n.value,"onUpdate:modelValue":f[2]||(f[2]=T=>n.value=T),placeholder:"选填"},null,8,["modelValue"]),Te]),_:1})):ee("",!0)]),xe,m("div",null,[I(P,{size:"small",onClick:g,severity:"secondary"},{default:x(()=>[L("注册")]),_:1}),I(K,{layout:"vertical"}),I(P,{size:"small",onClick:h},{default:x(()=>[L("登录")]),_:1})])]))]),_:1},8,["visible"])],64)}}},ke=q(we,[["__scopeId","data-v-746ec453"]]);export{ke as default};
