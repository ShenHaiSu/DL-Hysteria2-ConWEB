import b from"./index-fuTe51Z2.js";import{h as I,G as K,H as x,a as h,k as B,b as l,d as o,F as O,A as P,c as U,w as i,f as v,t as C,J as S,Q as R,K as T,S as N,V as $}from"./index-zLBKAhNj.js";import{u as z}from"./hy2Server-CvyGRMCY.js";const n=m=>(N("data-v-f5f70208"),m=m(),$(),m),E={EditTableNode:""},D=n(()=>l("td",null,"IP地址",-1)),F=n(()=>l("td",null,"域名",-1)),H=n(()=>l("td",null,"别名",-1)),J=n(()=>l("td",null,"端口",-1)),G={style:{display:"flex","flex-direction":"column",gap:"5px"}},L=n(()=>l("td",null,"api端口",-1)),j=n(()=>l("td",null,"api秘钥",-1)),q=n(()=>l("td",null,"api连通性",-1)),Q=n(()=>l("td",null,"在线上限 设备",-1)),M=n(()=>l("td",null,"流量上限 GB",-1)),W={EditActionBase:""},X={__name:"unRegisterServerRegister",setup(m){const p=z(),f=K(),e=x({}),r=x("测试"),_=()=>{e.value=JSON.parse(JSON.stringify(p.unRegisteredList[p.editIndex])),e.value.port=[],e.value.domain="",e.value.alias="",e.value.infoPort=0,e.value.infoAuthKey="",e.value.maxOnline=0,e.value.maxBandwidth=0},A=()=>p.clsoeDialog(!1),V=u=>{e.value.port[u].length==0&&e.value.port.splice(u,1)},k=()=>{if(e.value.address.length==0&&e.value.domain.length==0||e.value.infoPort.length==0||e.value.infoAuthKey.length==0)return r.value="属性不完整";r.value!="测试中..."&&(r.value="测试中...",S.post("/hy2ServerInfo/testServer",{target:e.value.address,domain:e.value.domain,port:e.value.apiPort,authkey:e.value.infoAuthKey}).then(u=>{r.value=`成功 ${(u.data.responseTime/1e3).toFixed(2)}s`}).catch(u=>{r.value="失败"}))},w=()=>{if(e.value.infoPort.length==0||e.value.infoAuthKey.length==0||e.value.alias.length==0||e.value.maxOnline==0||e.value.maxBandwidth==0||e.value.port.length==0)return f.add({severity:"error",summary:"错误",detail:"属性不完整",life:3e3});const u={target:e.value.address,alias:e.value.alias,domain:e.value.domain,port:e.value.port,maxOnline:e.value.maxOnline,infoPort:e.value.infoPort,infoAuthKey:e.value.infoAuthKey,maxBandwidth:e.value.maxBandwidth};S.post("/hy2ServerInfo/registerServer",u).then(t=>{p.clsoeDialog(!0),f.add({severity:"success",summary:"成功",detail:"认证服务器成功",life:1e3})}).catch(t=>{f.add({severity:"error",summary:"错误",detail:"认证服务器失败",life:3e3})})};return _(),(u,t)=>{const s=R,d=T,g=b;return h(),B("div",null,[l("div",null,[l("table",E,[l("tbody",null,[l("tr",null,[D,l("td",null,[o(s,{modelValue:e.value.address,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.address=a),disabled:""},null,8,["modelValue"])])]),l("tr",null,[F,l("td",null,[o(s,{modelValue:e.value.domain,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.domain=a)},null,8,["modelValue"])])]),l("tr",null,[H,l("td",null,[o(s,{modelValue:e.value.alias,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.alias=a)},null,8,["modelValue"])])]),l("tr",null,[J,l("td",G,[(h(!0),B(O,null,P(e.value.port,(a,c)=>(h(),U(s,{modelValue:e.value.port[c],"onUpdate:modelValue":y=>e.value.port[c]=y,onChange:y=>V(c),onBlur:y=>V(c)},null,8,["modelValue","onUpdate:modelValue","onChange","onBlur"]))),256)),o(d,{onClick:t[3]||(t[3]=a=>e.value.port.push("")),severity:"secondary",outlined:"",size:"small"},{default:i(()=>[v("添加")]),_:1})])]),l("tr",null,[L,l("td",null,[o(s,{modelValue:e.value.infoPort,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.infoPort=a),type:"number"},null,8,["modelValue"])])]),l("tr",null,[j,l("td",null,[o(s,{modelValue:e.value.infoAuthKey,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.infoAuthKey=a)},null,8,["modelValue"])])]),l("tr",null,[q,l("td",null,[o(d,{onClick:k,outlined:"",severity:"secondary",size:"small",style:{width:"100%"}},{default:i(()=>[v(C(r.value),1)]),_:1})])]),l("tr",null,[Q,l("td",null,[o(s,{modelValue:e.value.maxOnline,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.maxOnline=a),type:"number"},null,8,["modelValue"])])]),l("tr",null,[M,l("td",null,[o(s,{modelValue:e.value.maxBandwidth,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.maxBandwidth=a),type:"number"},null,8,["modelValue"])])])])])]),l("div",W,[o(d,{onClick:_,severity:"secondary",size:"small"},{default:i(()=>[v("重置")]),_:1}),o(g,{layout:"vertical"}),o(d,{onClick:A,severity:"secondary",size:"small"},{default:i(()=>[v("取消")]),_:1}),o(g,{layout:"vertical"}),o(d,{onClick:w,size:"small"},{default:i(()=>[v("确认")]),_:1})])])}}},le=I(X,[["__scopeId","data-v-f5f70208"]]);export{le as default};
