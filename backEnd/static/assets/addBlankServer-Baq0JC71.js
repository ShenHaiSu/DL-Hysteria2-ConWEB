const __vite__fileDeps=["assets/index-WrhEKw8m.js","assets/index-BEx53xAQ.js","assets/index-DBz_WDjk.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{h as C,H as _,G as w,a as c,k as V,b as l,d as o,F as P,A as B,c as I,w as v,f as m,t as K,e as T,g as U,_ as O,J as g,Q as D,K as E,S as N,V as z}from"./index-BEx53xAQ.js";import{u as H}from"./hy2Server-CpqhIUtf.js";const n=r=>(N("data-v-f2adf9bf"),r=r(),z(),r),$={AddBlankServerTable:""},F=n(()=>l("td",null,"IP地址",-1)),j=n(()=>l("td",null,"域名",-1)),G=n(()=>l("td",null,"别名",-1)),L=n(()=>l("td",null,"代理端口",-1)),R={style:{display:"flex","flex-direction":"column",gap:"5px"}},J=n(()=>l("td",null,"api端口",-1)),Q=n(()=>l("td",null,"api密钥",-1)),q=n(()=>l("td",null,"api连通性",-1)),M=n(()=>l("td",null,"在线上限 设备",-1)),W=n(()=>l("td",null,"流量上限 GB",-1)),X={style:{display:"flex",width:"100%","justify-content":"center"}},Y={__name:"addBlankServer",setup(r){const e=_({address:"",domain:"",alias:"",infoPort:"",infoAuthKey:"",port:[],bandwidth:{total:0,used:0}}),h=H(),p=w(),s=_("测试"),x=U(()=>O(()=>import("./index-WrhEKw8m.js"),__vite__mapDeps([0,1,2]))),S=u=>{e.value.port[u].length==0&&e.value.port.splice(u,1)},b=()=>{if(e.value.address.length==0&&e.value.domain.length==0||e.value.infoPort.length==0||e.value.infoAuthKey.length==0)return s.value="信息不足";s.value!="测试中..."&&(s.value="测试中...",g.post("/hy2ServerInfo/testServer",{target:e.value.address,domain:e.value.domain,port:e.value.infoPort,authkey:e.value.infoAuthKey}).then(u=>{s.value=`成功 ${(u.data.responseTime/1e3).toFixed(2)}s`}).catch(u=>{s.value="失败"}))},A=()=>h.clsoeDialog(!1),k=()=>{if(e.value.address.length==0||e.value.domain.length==0||e.value.alias.length==0||e.value.port.length==0||e.value.infoPort.length==0||e.value.infoAuthKey.length==0||e.value.maxOnline<=0||e.value.bandwidth.total<=0)return p.add({severity:"error",summary:"错误",detail:"信息不足",life:3e3});g.post("/hy2ServerInfo/registerServer",{target:e.value.address,domain:e.value.domain,alias:e.value.alias,port:e.value.port,infoPort:e.value.infoPort,infoAuthKey:e.value.infoAuthKey,maxOnline:Number(e.value.maxOnline)||1,maxBandwidth:Number(e.value.bandwidth.total)||1}).then(u=>{p.add({severity:"success",summary:"成功",detail:"服务器添加成功",life:1e3}),h.clsoeDialog(!0)}).catch(u=>{p.add({severity:"error",summary:"错误",detail:"服务器添加失败",life:3e3})})};return(u,t)=>{const d=D,i=E;return c(),V("div",null,[l("div",null,[l("table",$,[l("tbody",null,[l("tr",null,[F,l("td",null,[o(d,{modelValue:e.value.address,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.address=a)},null,8,["modelValue"])])]),l("tr",null,[j,l("td",null,[o(d,{modelValue:e.value.domain,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.domain=a)},null,8,["modelValue"])])]),l("tr",null,[G,l("td",null,[o(d,{modelValue:e.value.alias,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.alias=a)},null,8,["modelValue"])])]),l("tr",null,[L,l("td",R,[(c(!0),V(P,null,B(e.value.port,(a,f)=>(c(),I(d,{modelValue:e.value.port[f],"onUpdate:modelValue":y=>e.value.port[f]=y,onChange:y=>S(f)},null,8,["modelValue","onUpdate:modelValue","onChange"]))),256)),o(i,{onClick:t[3]||(t[3]=a=>e.value.port.push("")),severity:"secondary",outlined:"",size:"small"},{default:v(()=>[m("添加")]),_:1})])]),l("tr",null,[J,l("td",null,[o(d,{modelValue:e.value.infoPort,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.infoPort=a),type:"number"},null,8,["modelValue"])])]),l("tr",null,[Q,l("td",null,[o(d,{modelValue:e.value.infoAuthKey,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.infoAuthKey=a)},null,8,["modelValue"])])]),l("tr",null,[q,l("td",null,[o(i,{onClick:b,outlined:"",size:"small",style:{width:"100%"},severity:"secondary"},{default:v(()=>[m(K(s.value),1)]),_:1})])]),l("tr",null,[M,l("td",null,[o(d,{modelValue:e.value.maxOnline,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.maxOnline=a),type:"number"},null,8,["modelValue"])])]),l("tr",null,[W,l("td",null,[o(d,{modelValue:e.value.bandwidth.total,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.bandwidth.total=a),type:"number"},null,8,["modelValue"])])])])])]),l("div",X,[o(i,{onClick:A,severity:"secondary",size:"small"},{default:v(()=>[m("取消")]),_:1}),o(T(x),{layout:"vertical"}),o(i,{onClick:k,size:"small"},{default:v(()=>[m("确定")]),_:1})])])}}},le=C(Y,[["__scopeId","data-v-f2adf9bf"]]);export{le as default};
