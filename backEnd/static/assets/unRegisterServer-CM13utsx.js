import{h as w,G as C,n as D,a as l,k as d,b as r,t as u,v as h,f as o,d as v,w as S,J as p,K as T,S as k,V as B}from"./index-BzstpyG_.js";import{u as b}from"./hy2Server-CzgD5p7S.js";const i=s=>(k("data-v-c9041516"),s=s(),B(),s),E={UnRegisterServerBase:""},U=i(()=>r("h2",null,"IP地址",-1)),V=i(()=>r("h2",null,"请求次数",-1)),$=i(()=>r("h2",{style:{color:"red"}},"错误次数",-1)),H=i(()=>r("h2",null,"操作",-1)),N={UnAuthServerActionBase:""},A={__name:"unRegisterServer",props:["targetServer","targetIndex"],setup(s){const t=s,a=b(),n=C(),m=()=>Object.values(t.targetServer.error).reduce((e,_)=>e+_,0),f=()=>{let e="";return e+=`方法错误：${t.targetServer.error.method}
`,e+=`请求体错误：${t.targetServer.error.body}
`,e},x=()=>{let e="";return e+=`首次请求：${new Date(t.targetServer.firstConnect).toLocaleString()}
`,e+=`最近请求：${new Date(t.targetServer.lastConnect).toLocaleString()}
`,e},y=()=>{p.post("/hy2ServerInfo/deleteServer",{target:t.targetServer.address}).then(e=>{n.add({severity:"success",summary:"删除成功",detail:"该服务器记录已删除",life:1e3})}).catch(e=>{n.add({severity:"error",summary:"删除失败",detail:"请检查网络连接或联系管理员",life:3e3})})},I=()=>{p.post("/hy2ServerInfo/clearServer",{target:t.targetServer.address}).then(e=>{a.freshTarget++,n.add({severity:"success",summary:"清空成功",detail:"该服务器的统计数据已清空",life:1e3})}).catch(e=>{n.add({severity:"error",summary:"清空失败",detail:"请检查网络连接或联系管理员",life:3e3})})},R=()=>{a.editDialogShow=!0,a.editDialogMode="unregister-register",a.editIndex=t.targetIndex};return(e,_)=>{const c=T,g=D("tooltip");return l(),d("div",E,[r("div",null,[U,r("p",null,u(t.targetServer.address),1)]),r("div",null,[V,h((l(),d("p",null,[o(u(t.targetServer.connectCount),1)])),[[g,{value:x(),autoHide:!1},void 0,{bottom:!0}]])]),r("div",null,[$,h((l(),d("p",null,[o(u(m()),1)])),[[g,{value:f(),autoHide:!1},void 0,{bottom:!0}]])]),r("div",null,[H,r("div",N,[v(c,{onClick:y},{default:S(()=>[o("删除")]),_:1}),v(c,{onClick:I},{default:S(()=>[o("清空")]),_:1}),v(c,{onClick:R},{default:S(()=>[o("认证")]),_:1})])])])}}},j=w(A,[["__scopeId","data-v-c9041516"]]);export{j as default};
